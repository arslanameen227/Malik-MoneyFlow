(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},16715,e=>{"use strict";let a=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],16715)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},87378,e=>{"use strict";let a=(0,e.i(75254).default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);e.s(["Banknote",()=>a],87378)},92203,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(94433),c=e.i(17927),n=e.i(55894),r=e.i(67881),l=e.i(23750),i=e.i(10708),o=e.i(70065),d=e.i(30374),u=e.i(62870),h=e.i(94179),m=e.i(7233),x=e.i(27612),p=e.i(52754);let j=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);var f=e.i(87378),v=e.i(31278),y=e.i(16715),g=e.i(47163);function N(){let{user:e}=(0,t.useAuth)(),[N,w]=(0,s.useState)([]),[b,C]=(0,s.useState)(!0),[k,A]=(0,s.useState)(!1),[B,M]=(0,s.useState)(!1),[S,L]=(0,s.useState)(""),[_,T]=(0,s.useState)("cash"),[H,I]=(0,s.useState)(""),[O,z]=(0,s.useState)(""),[D,F]=(0,s.useState)("");async function q(){C(!0);try{let a=await (0,n.getLocalAccounts)();w(a),(0,n.isOnline)()&&e&&await E()}catch(e){console.error("Error loading accounts:",e)}finally{C(!1)}}async function E(){if(e){A(!0);try{let{data:a,error:s}=await c.supabaseBrowser.from("accounts").select("*").eq("user_id",e.id).eq("is_active",!0).order("created_at",{ascending:!1});if(s)throw s;if(a){for(let e of(await (0,n.clearLocalAccounts)(),a))await (0,n.saveLocalAccount)(e);w(a)}}catch(e){console.error("Error syncing accounts:",e)}finally{A(!1)}}}async function P(a){if(a.preventDefault(),!e)return;let s={user_id:e.id,name:S,type:_,opening_balance:parseFloat(H)||0,current_balance:parseFloat(H)||0,account_number:O||void 0,provider:D||void 0,is_active:!0};try{if((0,n.isOnline)()){let{data:e,error:a}=await c.supabaseBrowser.from("accounts").insert(s).select().single();if(a)throw a;e&&(await (0,n.saveLocalAccount)(e),w(a=>[e,...a]))}else{let e={...s,id:`temp-${Date.now()}`,created_at:new Date().toISOString()};await (0,n.saveLocalAccount)(e),w(a=>[e,...a])}L(""),T("cash"),I(""),z(""),F(""),M(!1)}catch(e){console.error("Error creating account:",e)}}async function V(e){if(confirm("Are you sure you want to delete this account?"))try{if((0,n.isOnline)()&&!e.startsWith("temp-")){let{error:a}=await c.supabaseBrowser.from("accounts").update({is_active:!1}).eq("id",e);if(a)throw a}await (0,n.deleteLocalAccount)(e),w(a=>a.filter(a=>a.id!==e))}catch(e){console.error("Error deleting account:",e)}}return((0,s.useEffect)(()=>{q()},[]),b)?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(v.Loader2,{className:"h-8 w-8 animate-spin"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Accounts"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:E,disabled:k,children:[(0,a.jsx)(y.RefreshCw,{className:`h-4 w-4 mr-2 ${k?"animate-spin":""}`}),"Sync"]}),(0,a.jsxs)(d.Dialog,{open:B,onOpenChange:M,children:[(0,a.jsx)(d.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{size:"sm",children:[(0,a.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Add Account"]})}),(0,a.jsxs)(d.DialogContent,{children:[(0,a.jsx)(d.DialogHeader,{children:(0,a.jsx)(d.DialogTitle,{children:"Create New Account"})}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"name",children:"Account Name"}),(0,a.jsx)(l.Input,{id:"name",placeholder:"e.g., Main Cash, HBL Bank, JazzCash",value:S,onChange:e=>L(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"type",children:"Account Type"}),(0,a.jsxs)(u.Select,{value:_,onValueChange:e=>T(e),children:[(0,a.jsx)(u.SelectTrigger,{children:(0,a.jsx)(u.SelectValue,{})}),(0,a.jsxs)(u.SelectContent,{children:[(0,a.jsx)(u.SelectItem,{value:"cash",children:"Cash on Hand"}),(0,a.jsx)(u.SelectItem,{value:"bank",children:"Bank Account"}),(0,a.jsx)(u.SelectItem,{value:"wallet",children:"Mobile Wallet"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"openingBalance",children:"Opening Balance"}),(0,a.jsx)(l.Input,{id:"openingBalance",type:"number",step:"0.01",placeholder:"0.00",value:H,onChange:e=>I(e.target.value),required:!0})]}),"cash"!==_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"provider",children:"Bank / Provider Name"}),(0,a.jsx)(l.Input,{id:"provider",placeholder:"e.g., HBL, JazzCash, Easypaisa",value:D,onChange:e=>F(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"accountNumber",children:"Account Number"}),(0,a.jsx)(l.Input,{id:"accountNumber",placeholder:"Account or IBAN number",value:O,onChange:e=>z(e.target.value)})]})]}),(0,a.jsx)(r.Button,{type:"submit",className:"w-full",children:"Create Account"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[N.map(e=>(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:function(e){switch(e){case"cash":return(0,a.jsx)(f.Banknote,{className:"h-5 w-5"});case"bank":return(0,a.jsx)(j,{className:"h-5 w-5"});case"wallet":return(0,a.jsx)(p.Wallet,{className:"h-5 w-5"})}}(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.CardTitle,{className:"text-lg",children:e.name}),(0,a.jsx)(h.Badge,{variant:"secondary",className:"mt-1",children:function(e){switch(e){case"cash":return"Cash on Hand";case"bank":return"Bank Account";case"wallet":return"Mobile Wallet"}}(e.type)})]})]}),(0,a.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>V(e.id),children:(0,a.jsx)(x.Trash2,{className:"h-4 w-4"})})]})}),(0,a.jsx)(o.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Current Balance"}),(0,a.jsx)("span",{className:"font-semibold",children:(0,g.formatCurrency)(e.current_balance)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Opening Balance"}),(0,a.jsx)("span",{children:(0,g.formatCurrency)(e.opening_balance)})]}),e.account_number&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Account #"}),(0,a.jsx)("span",{className:"font-mono text-xs",children:e.account_number})]}),e.provider&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Provider"}),(0,a.jsx)("span",{children:e.provider})]})]})})]},e.id)),0===N.length&&(0,a.jsx)(o.Card,{className:"col-span-full",children:(0,a.jsx)(o.CardContent,{className:"py-8 text-center text-muted-foreground",children:'No accounts yet. Click "Add Account" to create one.'})})]})]})}e.s(["default",()=>N],92203)}]);