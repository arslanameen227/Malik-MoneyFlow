(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},30601,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(94433),a=e.i(17927),l=e.i(67881),n=e.i(23750),i=e.i(70065),o=e.i(10708),d=e.i(31278),c=e.i(69638),x=e.i(63209),h=e.i(75254);let u=(0,h.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),m=(0,h.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var p=e.i(71689);function w(){let{updatePassword:e}=(0,r.useAuth)(),[h,w]=(0,s.useState)(!0),[f,y]=(0,s.useState)({type:"info",text:"Verifying reset link..."}),[j,b]=(0,s.useState)(!1),[g,N]=(0,s.useState)(""),[k,C]=(0,s.useState)(""),[v,P]=(0,s.useState)(!1),[L,S]=(0,s.useState)(!1),[A,R]=(0,s.useState)(!1);async function B(t){if(t.preventDefault(),g!==k)return void y({type:"error",text:"Passwords do not match"});if(g.length<6)return void y({type:"error",text:"Password must be at least 6 characters"});w(!0),y(null);let{error:s}=await e(g);s?y({type:"error",text:s}):(b(!0),window.history.replaceState({},document.title,window.location.pathname)),w(!1)}return((0,s.useEffect)(()=>{let e=new URL(window.location.href),t=e.searchParams.get("code"),s=e.searchParams.get("refresh_token")||"";if(e.searchParams.get("type"),!t){let e=window.location.hash;if(e){let r=new URLSearchParams(e.substring(1));t=r.get("access_token"),s=r.get("refresh_token")||"",r.get("type")}}if(!t){y({type:"error",text:"No reset token found. Please request a new password reset link."}),w(!1);return}a.supabaseBrowser.auth.setSession({access_token:t,refresh_token:s}).then(({error:e})=>{e?y({type:"error",text:"Invalid or expired reset link. Please request a new password reset link."}):(R(!0),y(null)),w(!1)})},[]),j)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,t.jsxs)(i.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(i.CardHeader,{className:"text-center",children:[(0,t.jsx)(c.CheckCircle,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),(0,t.jsx)(i.CardTitle,{className:"text-xl font-bold",children:"Password Reset!"}),(0,t.jsx)(i.CardDescription,{children:"Your password has been successfully updated"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)(l.Button,{onClick:()=>window.location.href="/login/",className:"w-full",children:"Go to Login"})})]})}):h||A||f?.type!=="error"?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,t.jsxs)(i.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(i.CardHeader,{className:"text-center relative",children:[(0,t.jsx)("button",{onClick:()=>window.location.href="/login/",className:"absolute left-4 top-4 text-muted-foreground hover:text-foreground",children:(0,t.jsx)(p.ArrowLeft,{className:"h-5 w-5"})}),(0,t.jsx)(i.CardTitle,{className:"text-2xl font-bold",children:"Set New Password"}),(0,t.jsx)(i.CardDescription,{children:"Enter your new password below"})]}),(0,t.jsxs)(i.CardContent,{children:[f&&(0,t.jsx)("div",{className:`mb-4 p-3 border rounded-md ${"error"===f.type?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:["error"===f.type?(0,t.jsx)(x.AlertCircle,{className:"h-5 w-5 text-red-500 mt-0.5 shrink-0"}):(0,t.jsx)(d.Loader2,{className:"h-5 w-5 text-blue-500 mt-0.5 shrink-0 animate-spin"}),(0,t.jsx)("p",{className:`text-sm ${"error"===f.type?"text-red-700":"text-blue-700"}`,children:f.text})]})}),(0,t.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"password",children:"New Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.Input,{id:"password",type:v?"text":"password",placeholder:"Min 6 characters",value:g,onChange:e=>N(e.target.value),required:!0,disabled:h||!A,minLength:6}),(0,t.jsx)("button",{type:"button",onClick:()=>P(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",tabIndex:-1,children:v?(0,t.jsx)(m,{size:18}):(0,t.jsx)(u,{size:18})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"confirm-password",children:"Confirm Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.Input,{id:"confirm-password",type:L?"text":"password",placeholder:"Re-enter password",value:k,onChange:e=>C(e.target.value),required:!0,disabled:h||!A}),(0,t.jsx)("button",{type:"button",onClick:()=>S(!L),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",tabIndex:-1,children:L?(0,t.jsx)(m,{size:18}):(0,t.jsx)(u,{size:18})})]})]}),(0,t.jsx)(l.Button,{type:"submit",className:"w-full",disabled:h||!A,children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Reset Password"}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>window.location.href="/login/",className:"text-sm text-muted-foreground hover:underline cursor-pointer bg-transparent border-0 p-0",children:"Back to Login"})})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,t.jsxs)(i.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(i.CardHeader,{className:"text-center",children:[(0,t.jsx)("button",{onClick:()=>window.location.href="/forgot-password/",className:"absolute left-4 top-4 text-muted-foreground hover:text-foreground",children:(0,t.jsx)(p.ArrowLeft,{className:"h-5 w-5"})}),(0,t.jsx)(x.AlertCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)(i.CardTitle,{className:"text-xl font-bold",children:"Invalid Link"}),(0,t.jsx)(i.CardDescription,{children:f.text})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsx)(l.Button,{onClick:()=>window.location.href="/forgot-password/",className:"w-full",children:"Request New Link"})})]})})}e.s(["default",()=>w],30601)}]);