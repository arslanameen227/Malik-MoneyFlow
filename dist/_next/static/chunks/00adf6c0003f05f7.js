(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63209,e=>{"use strict";let a=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],63209)},16715,e=>{"use strict";let a=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],16715)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},32545,e=>{"use strict";var a=e.i(43476),t=e.i(71645),i=e.i(94433),n=e.i(17927),s=e.i(70065),r=e.i(67881),d=e.i(23750),c=e.i(10708),l=e.i(94179),o=e.i(55894),h=e.i(31278),u=e.i(75254);let x=(0,u.default)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),y=(0,u.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var f=e.i(27612),m=e.i(16715),j=e.i(63209);function p(){let{user:e}=(0,i.useAuth)(),[u,p]=(0,t.useState)(!0),[w,C]=(0,t.useState)(0),[v,k]=(0,t.useState)(!1);async function g(){C((await (0,o.getPendingTransactions)()).length)}async function M(){k(!0);try{for(let e of(await (0,o.getPendingTransactions)())){let{error:a}=await n.supabaseBrowser.from("transactions").insert({user_id:e.user_id,type:e.type,from_account_id:e.from_account_id,to_account_id:e.to_account_id,customer_id:e.customer_id,customer_account_id:e.customer_account_id,amount:e.amount,fee_amount:e.fee_amount,description:e.description,transaction_date:e.transaction_date});a||await (0,o.removePendingTransaction)(e.id)}await g()}catch(e){console.error("Error syncing:",e)}finally{k(!1)}}async function _(){confirm("Clear all local data? This will not delete server data.")&&(await (0,o.clearAllLocalData)(),window.location.reload())}return(0,t.useEffect)(()=>{let e=()=>p((0,o.isOnline)());return e(),window.addEventListener("online",e),window.addEventListener("offline",e),g(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),(0,a.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Settings"}),(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{children:"Connection Status"})}),(0,a.jsx)(s.CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[u?(0,a.jsx)(x,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(y,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("span",{children:u?"Online":"Offline"}),(0,a.jsx)(l.Badge,{variant:u?"default":"secondary",children:u?"Connected":"Disconnected"})]})})]}),w>0&&(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{children:"Pending Sync"})}),(0,a.jsx)(s.CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.AlertCircle,{className:"h-5 w-5 text-amber-500"}),(0,a.jsxs)("span",{children:[w," transactions waiting to sync"]})]}),(0,a.jsxs)(r.Button,{size:"sm",onClick:M,disabled:v||!u,children:[v?(0,a.jsx)(h.Loader2,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(m.RefreshCw,{className:"h-4 w-4 mr-2"}),"Sync Now"]})]})})]}),(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{children:"Data Management"})}),(0,a.jsxs)(s.CardContent,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Clear all locally cached data. Server data will not be affected."}),(0,a.jsxs)(r.Button,{variant:"destructive",onClick:_,children:[(0,a.jsx)(f.Trash2,{className:"h-4 w-4 mr-2"})," Clear Local Data"]})]})]}),(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{children:"Account"})}),(0,a.jsx)(s.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Email"}),(0,a.jsx)(d.Input,{value:e?.email||"",disabled:!0})]})})]})]})}e.s(["default",()=>p],32545)}]);